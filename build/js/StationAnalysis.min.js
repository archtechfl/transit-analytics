function StationRidershipWidget(e){this.pageSize=e}StationRidershipWidget.prototype.begin=function(){this.storage=[],this.makeDataRequest(),this.originalData},StationRidershipWidget.prototype.makeDataRequest=function(){var e,i,t,r;r=this,e=0,i=5e3,t="https://data.cityofchicago.org/resource/5neh-572f.json?$",r.retrieveLoop(t,i,e)},StationRidershipWidget.prototype.retrieveLoop=function(e,i,t){var r="&$where=date > '2014/01/01' AND date < '2014/12/31'",a=e+"limit="+i+"&$offset="+t+r,n=this,s=t;$.get(a,function(t){$.each(t,function(e,i){n.storage.push(i)}),5e3===t.length?(s+=5e3,n.retrieveLoop(e,i,s)):n.dataOrganizer(n.storage)})},StationRidershipWidget.prototype.dataOrganizer=function(e){var i={},t=[],r=[];$.each(e,function(e,t){var a=r.indexOf(t.station_id);if(-1===a){i[t.station_id]={},r.push(t.station_id),i[t.station_id].name=t.stationname;var n=parseInt(t.rides);i[t.station_id].rides=n}else{var n=parseInt(t.rides),s=parseInt(i[t.station_id].rides);i[t.station_id].rides=n+s}}),$.each(i,function(e,i){t.push(i)}),this.organizeTable(t)},StationRidershipWidget.prototype.organizeTable=function(e){var i,t,r,a;this.originalData=e,a=this.sortingRidership(e,"rides","descending");var n=new PaginationWidget("#table-1-ridership");n.begin(10),i=n.paginator(a),this.paginatedStorage=i,t=1,r=i.pages.length,this.renderNavigator(i.pages,t),renderRidership=new TableRenderer("ridershipTable","#ridershipTemplate",".ridershipTableContainer",".ridershipNavigation"),this.renderRidership=renderRidership,renderRidership.renderTable(i[t],t,r,1),this.onSort(),this.getPage(r)},StationRidershipWidget.prototype.sortingRidership=function(e,i,t){var r,a;return r=e,a=r.sort(function(e,r){return"rides"===i?"descending"===t?r.rides-e.rides:e.rides-r.rides:"descending"===t?r.name-e.name:e.name-r.name})},StationRidershipWidget.prototype.renderNavigator=function(e,i){var t,r,a;t={pages:e},r=$("#stationRidershipNavTemplate").html(),a=Mustache.render(r,t),$(".ridershipNavigation").html(a)},StationRidershipWidget.prototype.onSort=function(){$(".station_listing_header").on("click",".sorting_header",function(e){console.log(e)})},StationRidershipWidget.prototype.getPage=function(e){var i,t,r,a,n;i=e,t=this,r=".ridershipNavigation .pagination-page-button",n=r+".active",a=n+" .page-number",$(".ridershipNavigation").on("click",".pagination-nav-button",function(e){e.preventDefault();var s,o,d,p,g,h,c,u;s=$(e.currentTarget).hasClass("pagination-end-button"),o=$(e.currentTarget).hasClass("active"),s||o?(isDisabled=$(e.currentTarget).hasClass("disabled"),isDisabled||(p=$(e.currentTarget).hasClass("previous-nav"),g=Number($(a).text()),$(n).removeClass("active"),h=p?g-1:g+1,c=(h-1)*t.pageSize+1,u=t.renderRidership,u.renderTable(t.paginatedStorage[h],h,i,c))):($(r+".active").removeClass("active"),d=Number($(e.currentTarget).find(".page-number").text()),c=(d-1)*t.pageSize+1,u=t.renderRidership,u.renderTable(t.paginatedStorage[d],d,i,c),t.onSort())})};